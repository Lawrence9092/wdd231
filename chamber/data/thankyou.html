<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Thank You | Harare Chamber of Commerce</title>
  <meta name="description" content="Thank you for your membership application." />
  <meta name="author" content="Lawrence Ngwenya" />

  <link rel="stylesheet" href="styles/styles.css" />
  <link rel="stylesheet" href="styles/base.css" />

  <style>
    main.thanks-main {
      width: 90%;
      max-width: 760px;
      margin: 2rem auto;
      padding: 1.25rem;
      background: var(--white);
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    }
    .summary { margin-top: 1rem; display: grid; gap: 0.6rem; }
    .summary dt { font-weight: 700; color: var(--primary-green); }
    .summary dd { margin: 0 0 0.8rem 0; color:#333; }
    .back-link { display:inline-block; margin-top:1rem; color:var(--primary-green); text-decoration:none; font-weight:700;}
  </style>
</head>
<body>
  <header>
    <div class="logo-title">
      <img src="images/chamberofcommerce.png" alt="Harare Chamber of Commerce logo" class="logo">
      <p class="site-title">Harare Chamber of Commerce</p>
    </div>

    <nav class="main-nav">
      <button id="menu-toggle" aria-label="Toggle navigation">☰</button>
      <ul id="nav-menu">
        <li><a href="index.html">Home</a></li>
        <li><a href="directory.html">Directory</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </nav>
  </header>

  <section class="hero">
    <div class="hero-text">
      <h2>Thank you for your application</h2>
      <p>We appreciate your interest in joining the Harare Chamber of Commerce.</p>
    </div>
  </section>

  <main class="thanks-main" aria-labelledby="thanks-heading">
    <h3 id="thanks-heading">Application received</h3>
    <p>Below is a summary of the information you submitted. Our membership team will contact you shortly.</p>

    <dl class="summary" id="summaryList" role="list">
      <!-- populated by JS -->
    </dl>

    <a href="join.html" class="back-link">Return to membership form</a>
  </main>

  <footer>
    <p>Contact: info@hararechamber.co.zw | Phone: +263 775 563 266</p>
    <p>© <span id="year"></span> Harare Chamber of Commerce | Developed by Lawrence Ngwenya | WDD 231</p>
    <p>Last modified: <span id="lastModified"></span></p>
  </footer>

  <script src="scripts/scripts.js" defer></script>

  <script>
    // show current year & last modified
    const yearSpan = document.getElementById("year");
    const lmSpan = document.getElementById("lastModified");
    if (yearSpan) yearSpan.textContent = new Date().getFullYear();
    if (lmSpan) lmSpan.textContent = document.lastModified;

    // read URL params and display required fields
    const params = new URLSearchParams(window.location.search);

    // required fields to show per assignment
    const requiredKeys = [
      { key: 'firstName', label: 'First name' },
      { key: 'lastName', label: 'Last name' },
      { key: 'email', label: 'Email' },
      { key: 'mobile', label: 'Mobile phone' },
      { key: 'organization', label: 'Business / Organization' },
      { key: 'timestamp', label: 'Submission timestamp' }
    ];

    const list = document.getElementById('summaryList');

    function safeDecode(value){
      try {
        return decodeURIComponent(value).replace(/\+/g, ' ');
      } catch (e) {
        return value;
      }
    }

    requiredKeys.forEach(item => {
      const value = params.get(item.key) || 'Not provided';
      const dt = document.createElement('dt');
      dt.textContent = item.label;
      const dd = document.createElement('dd');

      if (item.key === 'timestamp' && value !== 'Not provided') {
        // parse ISO or display raw string
        const d = new Date(value);
        dd.textContent = isNaN(d) ? safeDecode(value) : d.toLocaleString(undefined, {
          year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit'
        });
      } else {
        dd.textContent = safeDecode(value);
      }

      list.appendChild(dt);
      list.appendChild(dd);
    });

    // Optionally show more fields if present (membership, description)
    const extraKeys = [
      { key: 'membership', label: 'Membership level' },
      { key: 'description', label: 'Organization description' },
      { key: 'orgTitle', label: 'Organization title' }
    ];

    extraKeys.forEach(item => {
      const val = params.get(item.key);
      if (val) {
        const dt = document.createElement('dt');
        dt.textContent = item.label;
        const dd = document.createElement('dd');
        dd.textContent = safeDecode(val);
        list.appendChild(dt); list.appendChild(dd);
      }
    });
  </script>
</body>
</html>
